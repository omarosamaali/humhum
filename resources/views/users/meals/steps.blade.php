<!DOCTYPE html>
<html lang="en" dir="rtl">

<head>

    <!-- Title -->
    <title>ÿßŸÑÿÆÿ∑Ÿàÿßÿ™</title>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="DexignZone">
    <meta name="robots" content="index, follow">

    <meta name="keywords"
        content="android, ios, mobile, mobile template, mobile app, ui kit, dark layout, app, delivery, ecommerce, material design, mobile, mobile web, order, phonegap, pwa, store, web app, Ombe, coffee app, coffee template, coffee shop, mobile UI, coffee design, app template, responsive design, coffee showcase, style app, trendy app, modern UI, technology, User-Friendly Interface, Coffee Shop App, PWA (Progressive Web App), Mobile Ordering, Coffee Experience, Digital Menu, Innovative Technology, App Development, Coffee Experience, cafe, bootatrap, Bootstrap Framework, UI/UX Design, Coffee Shop Technology, Online Presence, Coffee Shop Website, Cafe Template, Mobile App Design, Web Application, Digital Presence, ">

    <meta name="description"
        content="Discover the perfect blend of design and functionality with Ombe, a Coffee Shop Mobile App Template crafted with Bootstrap and enhanced with Progressive Web App (PWA) capabilities. Elevate your coffee shop's online presence with a seamless, responsive, and feature-rich template. Explore a modern design, user-friendly interface, and PWA technology for an immersive mobile experience. Brew success for your coffee shop effortlessly ‚Äì Ombe is the ideal template to caffeinate your digital presence.">

    <meta property="og:title" content="Ombe- Coffee Shop Mobile App Template (Bootstrap + PWA) | DexignZone">
    <meta property="og:description"
        content="Discover the perfect blend of design and functionality with Ombe, a Coffee Shop Mobile App Template crafted with Bootstrap and enhanced with Progressive Web App (PWA) capabilities. Elevate your coffee shop's online presence with a seamless, responsive, and feature-rich template. Explore a modern design, user-friendly interface, and PWA technology for an immersive mobile experience. Brew success for your coffee shop effortlessly ‚Äì Ombe is the ideal template to caffeinate your digital presence.">

    <meta property="og:image" content="https://ombe.dexignzone.com/xhtml/social-image.png">

    <meta name="format-detection" content="telephone=no">

    <meta name="twitter:title" content="Ombe- Coffee Shop Mobile App Template (Bootstrap + PWA) | DexignZone">
    <meta name="twitter:description"
        content="Discover the perfect blend of design and functionality with Ombe, a Coffee Shop Mobile App Template crafted with Bootstrap and enhanced with Progressive Web App (PWA) capabilities. Elevate your coffee shop's online presence with a seamless, responsive, and feature-rich template. Explore a modern design, user-friendly interface, and PWA technology for an immersive mobile experience. Brew success for your coffee shop effortlessly ‚Äì Ombe is the ideal template to caffeinate your digital presence.">

    <meta name="twitter:image" content="https://ombe.dexignzone.com/xhtml/social-image.png">
    <meta name="twitter:card" content="summary_large_image">

    <!-- Mobile Specific -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, minimal-ui, viewport-fit=cover">
    @vite(['resources/js/app.js'])
    <!-- Favicons Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/user-logo/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Global CSS -->
    <link href="assets/vendor/bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/vendor/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css">
    <link rel="stylesheet" href="assets/vendor/imageuplodify/imageuploadify.min.css">
    <link rel="stylesheet" href="assets/vendor/swiper/swiper-bundle.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800;900&family=Raleway:wght@300;400;500&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary: #660099 !important;
        }

        div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm) {
            background-color: var(--primary) !important;
        }

        @media all {
            body {
                line-height: 1.5;
                font-size: 1rem;
                letter-spacing: -.025em;
                color: rgb(74 74 74/var(--tw-text-opacity, 1));
            }
        }

        body {
            font-size: 17px;
        }

        body {
            /* CSS Variables that may have been missed get put on body */
            --tw-bg-opacity: 1;
            --tw-bg-opacity: 1;
            --tw-text-opacity: 1;
        }

        @media all {
            * {
                border: 0 solid;
                box-sizing: border-box;
            }
        }

        @media (min-width: 970px) {
            .lg\:rounded {
                border-radius: .25rem;
            }

            .lg\:mb-lg {
                margin-bottom: 2.5rem;
            }

            .lg\:grid {
                display: grid;
            }

            .lg\:grid-cols-\[min\(35\%\,300px\)_1fr\] {
                grid-template-columns: min(35%, 300px) 1fr;
            }

            .lg\:gap-md {
                gap: 1.5rem;
            }
        }

        @media all {
            .mx-33j {
                margin-left: auto;
                margin-right: auto;
            }
        }

        @media (min-width: 970px) {
            .lg\:px-rg {
                padding-left: 1rem;
                padding-right: 1rem;
            }
        }

        @media all {
            .fle-kj4 {
                display: flex;
            }
        }

        @media (min-width: 970px) {
            .lg\:col-start-2 {
                grid-column-start: 2;
            }

            .lg\:rounded-lg {
                border-radius: .5rem;
            }

            .lg\:bg-cookpad-white {
                --tw-bg-opacity: 1;
                background-color: rgb(255 255 255/var(--tw-bg-opacity, 1));
            }

            .lg\:gap-x-sm {
                column-gap: .5rem;
            }

            .navigation-container:has(.sidebar-navigation) {
                grid-template-columns: clamp(240px, 20%, 270px) 1fr;
                padding-left: .5rem;
                padding-right: .5rem;
            }
        }

        body {
            transition: opacity ease-in 0.2s;
        }

        @media all {
            body {
                line-height: inherit;
                margin: 0;
            }

            body {
                font-size: 1rem;
                letter-spacing: -.025em;
                line-height: 1.5rem;
            }

            body {
                --tw-text-opacity: 1;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                font-feature-settings: "liga" on;
                color: rgb(74 74 74/var(--tw-text-opacity, 1));
                text-rendering: optimizeLegibility;
            }

            .bg-cookpad-gray-9gi {
                --tw-bg-opacity: 1;
                background-color: rgb(255 234 234);
            }
        }

        @media (min-width: 970px) {
            .lg\:overscroll-y-none {
                overscroll-behavior-y: none;
            }
        }

        :lang(ar) body {
            font-family: Noto Naskh Arabic, Noto Sans Arabic, sans-serif;
            font-size: 17px;
        }

        @media all {
            html {
                -webkit-text-size-adjust: 100%;
                font-feature-settings: normal;
                -webkit-tap-highlight-color: transparent;
                font-family: ui-sans-serif, system-ui, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
                font-variation-settings: normal;
                line-height: 1.5;
                tab-size: 4;
            }

            html {
                font-size: 1rem;
                letter-spacing: -.025em;
                line-height: 1.5rem;
            }

            .p-6h1 {
                padding: 1rem;
            }

            *,
            :after,
            :before {
                border: 0 solid;
                box-sizing: border-box;
            }

            .image-zyn {
                cursor: pointer;
                overflow: hidden;
                position: relative;
            }

            .aspect-\[340\/241\] {
                aspect-ratio: 340/241;
            }

            .item-sji {
                align-items: center;
            }

            .justify-byc {
                justify-content: center;
            }

            .text-wbi {
                text-align: center;
            }
        }

        @media (min-width: 970px) {
            .lg\:aspect-\[120\/170\] {
                aspect-ratio: 120/170;
            }
        }

        @media all {
            .text-fim {
                --tw-text-opacity: 1;
                color: rgb(96 96 96/var(--tw-text-opacity, 1));
            }

            input {
                font-feature-settings: inherit;
                color: inherit;
                font-family: inherit;
                font-size: 100%;
                font-variation-settings: inherit;
                font-weight: inherit;
                letter-spacing: inherit;
                line-height: inherit;
                margin: 0;
                padding: 0;
            }

            input {
                text-align: right;
            }

            input[type="file"] {
                display: block;
            }

            .image-zyn input {
                cursor: pointer;
                height: 100%;
                inset: 0;
                margin: 0;
                opacity: 0;
                position: absolute;
                width: 100%;
            }

            img {
                display: block;
                vertical-align: middle;
            }

            img {
                height: auto;
                max-width: 100%;
            }

            .pointer-events-j3t {
                pointer-events: none;
            }

            .w-8so {
                width: 4rem;
            }

            p {
                margin: 0;
            }

            .mt-mnq {
                margin-top: 1.5rem;
            }

            .text-x8v {
                font-size: 1rem;
                letter-spacing: -.025em;
                line-height: 1.5rem;
            }

            .font-9s7 {
                font-weight: 600;
            }

            .px-ql7 {
                padding-left: 1rem;
                padding-right: 1rem;
            }

            .text-b94 {
                font-size: .75rem;
                letter-spacing: -.2px;
                line-height: 1rem;
            }
        }

        input::placeholder {
            color: var(--primary) !important;
        }

        .custom-tab-1 .nav-link {
            font-size: 14px;
            padding: 6.3px;
        }

        .ingredient-item {
            margin: 20px;
        }

        .ingredient-type-indicator {
            text-align: center;
            display: block;
            width: fit-content;
            color: white;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            margin: auto;
            padding: 5px 10px;
            margin-bottom: 10px;
            background-color: var(--primary);
        }

        .page-content.space-top {
            margin: 20px;
        }

        .step-number-indicator {
            text-align: center;
            display: block;
            width: fit-content;
            color: white;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            margin: auto;
            padding: 5px 10px;
            margin-bottom: 10px;
            background-color: var(--primary);
        }

        .image-zyn-box {
            width: 150px;
            border-radius: 15px;
            height: 84px;
            margin: 10px 0px;
        }

        .swal2-rtl .swal2-close {
            display: flex;
            top: -20px;
            position: relative;
            border: 1px solid;
        }
    </style>
</head>

<body class="bg-light">
    <div class="page-wrapper">
        <div id="preloader">
            <div class="loader">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
        <header class="header header-fixed border-bottom">
            <div class="header-content">
                <div class="mid-content">
                    <h4 class="title">{{ __('messages.ÿßŸÑÿÆÿ∑Ÿàÿßÿ™') }}</h4>
                </div>
                <div class="left-content">
                    <a href="{{ url()->previous() ?: route('home') }}" id="back-btn">
                        <i class="feather icon-arrow-left"></i>
                    </a>
                </div>
            </div>
        </header>
        <div style="padding-top: 100px; margin: 0px 20px;">
            @foreach ($steps as $index => $step)
                <div style="display: flex; gap: 10px; align-items: center; justify-content: space-between;">
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <div class="step-number-indicator" style="margin-bottom: auto !important;">
                            {{ $index + 1 }}
                        </div>
                        <span id="step-text-{{ $index }}"
                            style="@if (in_array($index, $completedSteps)) text-decoration: line-through; @elseif($index > count($completedSteps)) opacity: 0.6; @endif">
                            {{ $step['description'] ?? __('messages.no_description') }}
                        </span>
                    </div>
                    <div style="display: flex; gap: 5px; align-items: center;">
                        <div onclick="completeStep({{ $index }})" id="complete-btn-{{ $index }}"
                            style="cursor: pointer; 
                        border: 1px solid var(--primary); 
                        
                        padding: 5px; border-radius: 5px; width: fit-content; margin-top: 10px;
                        @if (in_array($index, $completedSteps)) background-color: white;
                        pointer-events: none; opacity: 0.6; cursor: not-allowed; @endif"
                            title="@if (in_array($index, $completedSteps)) ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ™Ÿáÿßÿ° @elseif($index == count($completedSteps)) ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿÆÿ∑Ÿàÿ© @else Ÿäÿ¨ÿ® ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿÆÿ∑Ÿàÿ© ÿßŸÑÿ≥ÿßÿ®ŸÇÿ© ÿ£ŸàŸÑÿßŸã @endif">
                            <i style="font-size: 20px; color: var(--primary) !important;" class="fa-solid fa-check"></i>
                        </div>
                        <div onclick="speakText('{{ addslashes($step['description']) }}')"
                            style="cursor: pointer; background-color: var(--primary); color: white; padding: 5px; border-radius: 5px; width: fit-content; margin-top: 10px;"
                            title="ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÜÿ∑ŸÇ">
                            <i style="font-size: 20px; color: #ffffff;" class="fa-solid fa-headphones"></i>
                        </div>
                    </div>
                </div>
                @if (!empty($step['media']) && count($step['media']) > 0)
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px;">
                        @foreach ($step['media'] as $media)
                            <img class="image-zyn-box" src="{{ asset('storage/' . $media['url']) }}"
                                alt="{{ $media['original_name'] }}"
                                style="max-width: 200px; border-radius: 10px; cursor: pointer;"
                                onclick="openImage('{{ asset('storage/' . $media['url']) }}')">
                        @endforeach
                    </div>
                @endif
            @endforeach
        </div>

        <script>
            const recipeId = {{ $recipe->id }};
            const totalSteps = {{ count($steps) }};
            let completedSteps = @json($completedSteps);
            let startNotificationSent = false;

            function completeStep(stepIndex) {
                // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ£ŸÜ ÿßŸÑÿÆÿ∑Ÿàÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© ŸáŸä ÿßŸÑÿ™ÿßŸÑŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ® ÿ•ŸÉŸÖÿßŸÑŸáÿß
                if (stepIndex !== completedSteps.length) {
                    Swal.fire({
                        title: "ÿÆÿ∑ÿ£",
                        text: "Ÿäÿ¨ÿ® ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿÆÿ∑Ÿàÿ© ÿßŸÑÿ≥ÿßÿ®ŸÇÿ© ÿ£ŸàŸÑÿßŸã",
                        icon: "error"
                    });
                    return;
                }

                // ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ® ŸÑŸÑÿ≥Ÿäÿ±ŸÅÿ± ŸÑÿ≠ŸÅÿ∏ ÿßŸÑÿÆÿ∑Ÿàÿ©
                fetch('/recipe/complete-step', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRF-TOKEN': '{{ csrf_token() }}'
                        },
                        body: JSON.stringify({
                            recipe_id: recipeId,
                            step_index: stepIndex
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑÿ®ÿØÿ° ŸÅŸä ÿßŸÑÿ∑ŸáŸä ÿπŸÜÿØ ÿ•ŸÉŸÖÿßŸÑ ÿ£ŸàŸÑ ÿÆÿ∑Ÿàÿ©
                            if (stepIndex === 0 && !startNotificationSent) {
                                sendStartCookingNotification();
                                startNotificationSent = true;
                            }

                            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿÆÿ∑Ÿàÿßÿ™ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©
                            completedSteps.push(stepIndex);

                            // ÿ™ÿ≠ÿØŸäÿ´ Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
                            updateStepUI(stepIndex);

                            Swal.fire({
                                title: "ÿ™ŸÖ ÿ®ŸÜÿ¨ÿßÿ≠",
                                text: `ÿ™ŸÖ ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿÆÿ∑Ÿàÿ© ${stepIndex + 1}`,
                                icon: "success",
                                timer: 1500,
                                showConfirmButton: false
                            });

                            // ÿ•ÿ∞ÿß ÿ™ŸÖ ÿ•ŸÉŸÖÿßŸÑ ÿ¨ŸÖŸäÿπ ÿßŸÑÿÆÿ∑Ÿàÿßÿ™
                            if (completedSteps.length === totalSteps) {
                                setTimeout(() => {
                                    Swal.fire({
                                        title: "ŸÖÿ®ÿ±ŸàŸÉ! üéâ",
                                        text: "ÿ™ŸÖ ÿ•ŸÜŸáÿßÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿÆÿ∑Ÿàÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠",
                                        imageUrl: "{{ asset('assets/images/biryani.gif') }}",
                                        imageWidth: 200,
                                        imageHeight: 200,
                                        imageAlt: 'ŸÖÿ®ÿ±ŸàŸÉ',
                                        showCancelButton: true,
                                        confirmButtonText: "ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ®ÿØÿ°",
                                        cancelButtonText: "ÿ•ÿ∫ŸÑÿßŸÇ",
                                        confirmButtonColor: '#28a745',
                                        cancelButtonColor: '#6c757d'
                                    }).then((result) => {
                                        if (result.isConfirmed) {
                                            resetSteps();
                                        }
                                    });
                                }, 1000);

                            }
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        Swal.fire({
                            title: "ÿÆÿ∑ÿ£",
                            text: "ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ŸÇÿØŸÖ",
                            icon: "error"
                        });
                    });
            }

            function updateStepUI(stepIndex) {
                const buttonElement = document.getElementById(`complete-btn-${stepIndex}`);
                const stepText = document.getElementById(`step-text-${stepIndex}`);

                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≤ÿ± ÿßŸÑŸÖŸÉÿ™ŸÖŸÑ
                // buttonElement.style.backgroundColor = '#28a745';
                // buttonElement.style.pointerEvents = 'none';
                // buttonElement.style.opacity = '0.6';
                // buttonElement.style.cursor = 'not-allowed';
                buttonElement.title = "ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ™Ÿáÿßÿ°";

                // ÿ™ÿ∫ŸäŸäÿ± ŸÑŸàŸÜ ÿßŸÑÿ£ŸäŸÇŸàŸÜÿ© ŸÑŸÑÿ£ÿ®Ÿäÿ∂
                // buttonElement.querySelector('i').style.color = 'white';

                // ÿ¥ÿ∑ÿ® ÿßŸÑŸÜÿµ
                stepText.style.textDecoration = 'line-through';

                // ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿÆÿ∑Ÿàÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ© ÿ•ŸÜ Ÿàÿ¨ÿØÿ™
                if (completedSteps.length < totalSteps) {
                    const nextBtn = document.getElementById(`complete-btn-${completedSteps.length}`);
                    const nextText = document.getElementById(`step-text-${completedSteps.length}`);

                    // nextBtn.style.backgroundColor = 'var(--primary)';
                    nextBtn.style.cursor = 'pointer';
                    nextBtn.title = "ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿÆÿ∑Ÿàÿ©";
                    // nextBtn.querySelector('i').style.color = 'white';
                    nextText.style.opacity = '1';
                }
            }

            function resetSteps() {
                fetch('/recipe/reset-steps', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRF-TOKEN': '{{ csrf_token() }}'
                        },
                        body: JSON.stringify({
                            recipe_id: recipeId
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            Swal.fire({
                                title: "ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿπŸäŸäŸÜ",
                                text: "ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ®ÿØÿ° ŸÖŸÜ ÿ¨ÿØŸäÿØ",
                                icon: "success",
                                timer: 1500,
                                showConfirmButton: false
                            }).then(() => {
                                location.reload();
                            });
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
            }

            function sendStartCookingNotification() {
                fetch('/send-start-cooking-notification', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRF-TOKEN': '{{ csrf_token() }}'
                        },
                        body: JSON.stringify({
                            meal_name: "{{ $recipe->title }}"
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        console.log('ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑÿ®ÿØÿ° ŸÅŸä ÿßŸÑÿ∑ŸáŸä ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑŸá');
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
            }

            function speakText(text) {
                const isArabic = /[\u0600-\u06FF]/.test(text);
                const lang = isArabic ? 'ar' : 'en';
                responsiveVoice.speak(text, getVoiceForLang(lang), {
                    rate: 0.9
                });
            }

            function getVoiceForLang(lang) {
                const voices = {
                    'ar': 'Arabic Female',
                    'en': 'UK English Female',
                };
                return voices[lang] || 'UK English Female';
            }

            function openImage(imageUrl) {
                Swal.fire({
                    imageUrl: imageUrl,
                    imageAlt: 'ÿßŸÑÿµŸàÿ±ÿ©',
                    showCloseButton: true,
                    showConfirmButton: false,
                    background: 'transparent',
                    backdrop: 'rgba(0, 0, 0, 0.8)',
                    width: 'auto',
                    padding: '0'
                });
            }
        </script>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script>
    <script src="assets/js/dz.carousel.js"></script>
    <script src="assets/js/settings.js"></script>
    <script src="assets/js/custom.js"></script>
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=vm7hFTHk"></script>
    {!! $swalScript !!}
    <script>
        let completedSteps = 0;
        let startNotificationSent = false;

        function completeStep(stepIndex) {
            if (stepIndex !== completedSteps) {
                Swal.fire({
                    title: "ÿÆÿ∑ÿ£",
                    text: "Ÿäÿ¨ÿ® ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿÆÿ∑Ÿàÿ© ÿßŸÑÿ£ŸàŸÑŸâ ÿ£ŸàŸÑÿßŸã",
                    icon: "error"
                });
                return;
            }

            const buttonElement = document.getElementById(`complete-btn-${stepIndex}`);
            buttonElement.style.pointerEvents = 'none';
            buttonElement.style.opacity = '0.6';
            buttonElement.style.cursor = 'not-allowed';
            if (stepIndex === 0 && !startNotificationSent) {
                sendStartCookingNotification();
                startNotificationSent = true;
            }

            const completeBtn = document.getElementById(`complete-btn-${stepIndex}`);
            const stepText = document.getElementById(`step-text-${stepIndex}`);

            // completeBtn.style.backgroundColor = '#28a745';
            completeBtn.style.cursor = 'default';
            completeBtn.title = "ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ™Ÿáÿßÿ°";
            stepText.style.textDecoration = 'line-through';
            // stepText.style.opacity = '0.8';
            completedSteps++;
            if (completedSteps < {{ count($steps) }}) {
                const nextBtn = document.getElementById(`complete-btn-${completedSteps}`);
                nextBtn.style.backgroundColor = 'white';
                nextBtn.style.cursor = 'pointer';
                nextBtn.title = "ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿÆÿ∑Ÿàÿ©";

                const nextText = document.getElementById(`step-text-${completedSteps}`);
                nextText.style.opacity = '1';
            }

            Swal.fire({
                title: "ÿ™ŸÖ ÿ®ŸÜÿ¨ÿßÿ≠",
                text: `ÿ™ŸÖ ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿÆÿ∑Ÿàÿ© ${stepIndex + 1}`,
                icon: "success"
            });
        }

        function sendStartCookingNotification() {
            fetch('/send-start-cooking-notification', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRF-TOKEN': '{{ csrf_token() }}'
                    },
                    body: JSON.stringify({
                        meal_name: "{{ $recipe->title }}"
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log('ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑÿ®ÿØÿ° ŸÅŸä ÿßŸÑÿ∑ŸáŸä ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑŸá');
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }

        function speakText(text) {
            const isArabic = /[\u0600-\u06FF]/.test(text);
            const lang = isArabic ? 'ar' : 'en';
            responsiveVoice.speak(text, getVoiceForLang(lang), {
                rate: 0.9
            });
        }

        function getVoiceForLang(lang) {
            const voices = {
                'ar': 'Arabic Female',
                'en': 'UK English Female',
            };
            return voices[lang] || 'UK English Female';
        }

        function openImage(imageUrl) {
            Swal.fire({
                imageUrl: imageUrl,
                imageAlt: 'ÿßŸÑÿµŸàÿ±ÿ©',
                showCloseButton: true,
                showConfirmButton: false,
                background: 'transparent',
                backdrop: 'rgba(0, 0, 0, 0.8)',
                width: 'auto',
                padding: '0'
            });
        }
    </script>
</body>

</html>
